<header class="sms-topbar">
    <div class="sms-topbar-left">
        <button type="button" class="hamburger" title="Toggle menu" @onclick="ToggleNav">
            <span class="bi bi-list" aria-hidden="true"></span>
        </button>
    </div>

    <div class="sms-topbar-center">
        <input class="search" placeholder="Search bar (SURVEY ID / NAME)" />
    </div>

    <div class="sms-topbar-right">
        <button type="button" class="icon-btn" title="Notifications" @onclick="ToggleNotifs">
            <span class="bi bi-bell" aria-hidden="true"></span>
            @if (NotifCount > 0)
            {
                <span class="badge">@NotifCount</span>
            }
        </button>

        <span class="email">user@usda.gov</span>
        <span class="avatar" title="User">
            <span class="bi bi-person-circle" aria-hidden="true"></span>
        </span>
    </div>
</header>

@if (ShowNotifs)
{
    <div class="notif-dropdown">
        <div class="notif-header">Notifications</div>
        <ul>
            <li><strong>OMB-2026-014</strong> — Docket approval pending</li>
            <li><strong>OMB-2026-001</strong> — Docket approved</li>
            <li><strong>101</strong> — 6 overdue tasks</li>
            <li><strong>102</strong> — 1 schedule conflict</li>
        </ul>
    </div>
}

@code {
    [Parameter] public string Title { get; set; } = "Dashboard (Home)";
    [Parameter] public EventCallback OnToggleNav { get; set; }

    private bool ShowNotifs;
    private int NotifCount => 4;

    private void ToggleNotifs() => ShowNotifs = !ShowNotifs;

    private async Task ToggleNav()
    {
        if (OnToggleNav.HasDelegate)
            await OnToggleNav.InvokeAsync();
    }
}
