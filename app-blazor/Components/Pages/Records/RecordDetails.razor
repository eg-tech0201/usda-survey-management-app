@page "/records/details/{RecordId:int?}"

<h1>Record Details</h1>

<div class="card mb-3">
    <div class="card-body">
        <div class="row">
            <div class="col-md-3"><strong>Record Id:</strong> @SelectedRecord.RecordId</div>
            <div class="col-md-3"><strong>Respondent:</strong> @SelectedRecord.RespondentId</div>
            <div class="col-md-3"><strong>Status:</strong> @SelectedRecord.Status</div>
            <div class="col-md-3"><strong>Survey:</strong> @SelectedRecord.Survey</div>
        </div>
        <div class="row mt-2">
            <div class="col-md-3"><strong>County:</strong> @SelectedRecord.County</div>
            <div class="col-md-3"><strong>State:</strong> @SelectedRecord.State</div>
            <div class="col-md-3"><strong>Created:</strong> @SelectedRecord.CreatedOn.ToString("yyyy-MM-dd")</div>
            <div class="col-md-3"><strong>Updated:</strong> @SelectedRecord.UpdatedOn.ToString("yyyy-MM-dd")</div>
        </div>
    </div>
</div>

<div class="row g-3">
    <div class="col-12 col-lg-6">
        <div class="card">
            <div class="card-header">Record Fields</div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><strong>Response Mode:</strong> CAWI</li>
                    <li><strong>Enumerator:</strong> J. Patel</li>
                    <li><strong>Submission Window:</strong> 2026-01-01 to 2026-01-15</li>
                    <li><strong>Confidence Score:</strong> 92%</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-12 col-lg-6">
        <div class="card">
            <div class="card-header">Add Annotation / Metadata</div>
            <div class="card-body">
                <div class="mb-3">
                    <label class="form-label">Annotation</label>
                    <textarea class="form-control" rows="3" placeholder="Add reviewer note"></textarea>
                </div>
                <div class="mb-3">
                    <label class="form-label">Metadata Tag</label>
                    <input class="form-control" placeholder="flag: follow-up" />
                </div>
                <button class="btn btn-primary" type="button">Save</button>
            </div>
        </div>
    </div>
</div>

<div class="card mt-3">
    <div class="card-header">Audit Log</div>
    <div class="card-body">
        <ul>
            <li>Metadata updated by J. Patel — 2026-01-15</li>
            <li>Flag added: follow-up required — 2026-01-14</li>
            <li>Status changed to In Review — 2026-01-13</li>
        </ul>
    </div>
</div>

@code {
    [Parameter] public int? RecordId { get; set; }

    private record RecordDetail(
        int RecordId,
        string RespondentId,
        string County,
        string State,
        string Status,
        DateTime CreatedOn,
        DateTime UpdatedOn,
        string Survey
    );

    private readonly List<RecordDetail> Records = new()
    {
        new(20001, "RESP-8841", "Boone", "IA", "Complete", new DateTime(2026, 1, 1), new DateTime(2026, 1, 15), "1001 Crop Yield"),
        new(20002, "RESP-1299", "Linn", "IA", "In Review", new DateTime(2026, 1, 2), new DateTime(2026, 1, 16), "1001 Crop Yield"),
        new(20003, "RESP-5540", "Morrow", "OR", "Flagged", new DateTime(2026, 1, 3), new DateTime(2026, 1, 13), "1209 IWU")
    };

    private RecordDetail SelectedRecord =>
        Records.FirstOrDefault(r => r.RecordId == RecordId) ?? Records.First();
}
